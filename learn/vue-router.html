<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>David Blog | vue-router</title>
    <meta name="description" content="Just playing around">
    
    
    <link rel="preload" href="/blog/assets/css/8.styles.3e7d5f3a.css" as="style"><link rel="preload" href="/blog/assets/js/app.dc7427d7.js" as="script"><link rel="preload" href="/blog/assets/js/3.84709ce2.js" as="script"><link rel="prefetch" href="/blog/assets/js/4.914ac686.js"><link rel="prefetch" href="/blog/assets/js/0.34a60a6c.js"><link rel="prefetch" href="/blog/assets/js/1.12c9f115.js"><link rel="prefetch" href="/blog/assets/js/2.40728009.js"><link rel="prefetch" href="/blog/assets/js/5.a0222ff3.js"><link rel="prefetch" href="/blog/assets/js/6.aae6f125.js"><link rel="prefetch" href="/blog/assets/js/7.497b4857.js">
    <link rel="stylesheet" href="/blog/assets/css/8.styles.3e7d5f3a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/blog/" class="home-link router-link-active"><!----><span class="site-name">
      David Blog
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/diary/" class="nav-link">日记</a></div><div class="nav-item"><a href="/blog/learn/" class="nav-link router-link-active">学习</a></div><div class="nav-item"><a href="/blog/project/" class="nav-link">项目</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/diary/" class="nav-link">日记</a></div><div class="nav-item"><a href="/blog/learn/" class="nav-link router-link-active">学习</a></div><div class="nav-item"><a href="/blog/project/" class="nav-link">项目</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>学习</span><!----></p><ul class="sidebar-group-items"><li><a href="/blog/learn/json-server.html" class="sidebar-link">json-server</a></li><li><a href="/blog/learn/vue-router.html" class="active sidebar-link">vue-router</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/learn/vue-router.html#普通路由" class="sidebar-link">普通路由</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/learn/vue-router.html#不传参数" class="sidebar-link">不传参数</a></li><li class="sidebar-sub-header"><a href="/blog/learn/vue-router.html#传递query" class="sidebar-link">传递query</a></li><li class="sidebar-sub-header"><a href="/blog/learn/vue-router.html#传递params" class="sidebar-link">传递params</a></li><li class="sidebar-sub-header"><a href="/blog/learn/vue-router.html#动态路由跳转" class="sidebar-link">动态路由跳转</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/learn/vue-router.html#编程式路由" class="sidebar-link">编程式路由</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/learn/vue-router.html#api" class="sidebar-link">API</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/learn/vue-router.html#钩子函数-很重要" class="sidebar-link">钩子函数(很重要)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/learn/vue-router.html#组件中的路由钩子函数" class="sidebar-link">组件中的路由钩子函数</a></li><li class="sidebar-sub-header"><a href="/blog/learn/vue-router.html#router实例中的钩子函数" class="sidebar-link">router实例中的钩子函数</a></li><li class="sidebar-sub-header"><a href="/blog/learn/vue-router.html#router对应关系中的钩子函数" class="sidebar-link">router对应关系中的钩子函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/learn/vue-router.html#钩子的执行过程" class="sidebar-link">钩子的执行过程</a></li></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="vue-router"><a href="#vue-router" aria-hidden="true" class="header-anchor">#</a> vue-router</h1><p>学习一门技术, 最直接的方式就是看该技术项目的官方文档了, 因为没有比官方文档说的还要详细的了, 说来惭愧, <a href="https://cn.vuejs.org/" target="_blank" rel="noopener noreferrer">vue.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的文档过了十几遍, 但是<a href="https://router.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">vue-router<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的文档真的除了在实战项目中看别人用过外, 自己就没去看过了, 上次抽了一天时间看了看官网文档, 感觉像是打开了新世界的大门, 因为感觉学问确实很多, 知识点也很杂乱, 所以这篇文章就是记录下官方文档中的一些细节和总结, 方便日后二次学习.</p><h2 id="普通路由"><a href="#普通路由" aria-hidden="true" class="header-anchor">#</a> 普通路由</h2><ul><li><h3 id="不传参数"><a href="#不传参数" aria-hidden="true" class="header-anchor">#</a> 不传参数</h3></li></ul><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> DEMO1 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            path<span class="token punctuation">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span>
            component<span class="token punctuation">:</span> User
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>这是最简单的一种路由跳转了,当路由设定好了之后, 会根据component对应的组件来渲染页面, 简单归简单, 但这并没有传递参数</p></div><h3 id="传递query"><a href="#传递query" aria-hidden="true" class="header-anchor">#</a> 传递query</h3><p>这种传参可以类比于<code>get</code>方法, 参数的传递可以通过url观测到</p><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{path:<span class="token punctuation">'</span>/user<span class="token punctuation">'</span>,query:{age:13}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> DEMO2 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            path<span class="token punctuation">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span>
            components<span class="token punctuation">:</span> User
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        {{$route.query.age}} //渲染为13
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>点击跳转后的url <code>http://localhost:8080/#/user?age=13</code>
且可以通过<code>$route.query.age</code>获取到值<code>13</code></p></div><h3 id="传递params"><a href="#传递params" aria-hidden="true" class="header-anchor">#</a> 传递params</h3><p>类比于<code>post</code>方法</p><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{name:<span class="token punctuation">'</span>userr<span class="token punctuation">'</span>,params:{age:13}, query:{gender: <span class="token punctuation">'</span>male<span class="token punctuation">'</span>}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> DEMO2 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            path<span class="token punctuation">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span>
            name<span class="token punctuation">:</span> <span class="token string">'user'</span>
            components<span class="token punctuation">:</span> User
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        {{$route.params.age}} //渲染为13
        {{$route.query.gender}} //male
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>跟第二个又有点不同是path变成了name, query变成了params,路由配置中多了一个name属性, 这个时候当点击了之后url为<code>http://localhost:8080/#/user?gender=male</code>, 这种方式可以说涵盖了所有可能传参的方式, 推荐使用<code>name</code>,而不是使用<code>path</code>,url的参数写在<code>query</code>对象中, 其他参数写在<code>params</code>中.</p></div><h3 id="动态路由跳转"><a href="#动态路由跳转" aria-hidden="true" class="header-anchor">#</a> 动态路由跳转</h3><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{path:<span class="token punctuation">'</span>user/3154<span class="token punctuation">'</span>, query:{gender: <span class="token punctuation">'</span>male<span class="token punctuation">'</span>}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> DEMO2 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            path<span class="token punctuation">:</span> <span class="token string">'/user/:id'</span><span class="token punctuation">,</span>
            name<span class="token punctuation">:</span> <span class="token string">'userr'</span>
            components<span class="token punctuation">:</span> User
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        {{$route.params.id}} //3154
        {{$route.query.gender}} //male
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>至此, 总结为以下</p><table><thead><tr><th style="text-align:left">路由方式</th><th style="text-align:center">能否传query</th><th style="text-align:center">能否传params</th><th style="text-align:center">params参数在url中是否可见</th></tr></thead><tbody><tr><td style="text-align:left">{path, query}</td><td style="text-align:center">√</td><td style="text-align:center">×</td><td style="text-align:center"></td></tr><tr><td style="text-align:left">{name, params, query}</td><td style="text-align:center">√</td><td style="text-align:center">√</td><td style="text-align:center">不可见</td></tr><tr><td style="text-align:left">{path(动态传参), query}</td><td style="text-align:center">√</td><td style="text-align:center">√</td><td style="text-align:center">可见</td></tr></tbody></table><h2 id="编程式路由"><a href="#编程式路由" aria-hidden="true" class="header-anchor">#</a> 编程式路由</h2><p>编程式路由的左右就是不必使用<code>&lt;router-link&gt;</code>来跳转路由,
这其实跟history的API有那么一点类似, 来简单总结下</p><h3 id="api"><a href="#api" aria-hidden="true" class="header-anchor">#</a> API</h3><div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>location<span class="token punctuation">,</span> onComplete<span class="token operator">?</span><span class="token punctuation">,</span> onAbort<span class="token operator">?</span><span class="token punctuation">)</span>
</code></pre></div><p>这是最简单的跳转动作, 跳转过后会进入历史记录, 当你跳转完成后, 点击后退会回退到上一层, 其中的参<code>location</code>数类似于<code>:to=&quot;location&quot;</code>, 也支持三种方式, <code>onComplete</code>即为成功时候的回调, <code>onAbort</code>表示为终止时候的回调, 这里并不是onError也就表示并不代表了失败, 可能是<strong>在导航到此路由前, 跳转到其他路由</strong></p><div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>location<span class="token punctuation">,</span> onComplete<span class="token operator">?</span><span class="token punctuation">,</span> onAbort<span class="token operator">?</span><span class="token punctuation">)</span>
</code></pre></div><p>类似于push, 但是并不会存储在历史记录的队列中, 顾名思义就是替换的意思</p><div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
</code></pre></div><p>如果你熟悉history的API的话, 你一定知道这个方法, 这个方法接受一个整数, 1表示<strong>前进</strong>, -1表示<strong>后退</strong>, 这与浏览器的前进后退完全一致</p><h2 id="钩子函数-很重要"><a href="#钩子函数-很重要" aria-hidden="true" class="header-anchor">#</a> 钩子函数(很重要)</h2><p>第一次面试的时候就被这个问题, 当时给拦住了, 因为当时根本不知道还有路由钩子, 这也从测方面反应了读文档的重要性, 真的想学好Vue, 请多读官方文档, 你看个10遍都不过分, 同样的, 对于vue的生态圈中比较重要的几个, <code>vue-router</code>就算一个, 也需要看文档, 光从一些视频或者是什么论坛上很难寻找到有用的知识, 我看了ustbhuangyi老师的那门音乐APP课, 虽然用到了路由, 但是真的很浅很浅, 仅仅是一个动态路由而已, 废话这门多, 我来总结下我仔细看完路由钩子这篇官方文档的总结吧, 首先我们要知道哪些地方会有路由钩子函数</p><ul><li><h3 id="组件中的路由钩子函数"><a href="#组件中的路由钩子函数" aria-hidden="true" class="header-anchor">#</a> 组件中的路由钩子函数</h3></li></ul><p>页面跳转的过程也就是组件加载的过程和组件销毁的过程, 每个组件都有同一套钩子函数</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
    props<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            msg<span class="token punctuation">:</span> <span class="token string">'hello vue-router'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//路由钩子</span>
    <span class="token function">beforRouterEnter</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>       <span class="token comment">//undefined</span>
        <span class="token comment">//next(vm =&gt; {</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span>     <span class="token comment">//</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">beforRouterUpdata</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">beforRouterLeave</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>需要注意在<code>beforRouterEnter</code>的这个钩子中, 我们并不能访问到this, 举个简单的例子, 你data函数返回的数据中有msg, 但是在next()的回调中可以访问到this, 这是一个异步的过程, 我们先不去说这些钩子是在什么时机触发, 在我们介绍完整个钩子的时候我们利用一个例子来说明问题, 官网有关于路由钩子调用顺序的回答, 但并没有例子, 对于没有赖心的人来说, 可能就一扫而过了.</p></div><ul><li><h3 id="router实例中的钩子函数"><a href="#router实例中的钩子函数" aria-hidden="true" class="header-anchor">#</a> router实例中的钩子函数</h3></li></ul><p>这个地方配置的路由钩子其实是全局的一种钩子, 也就是说只要你路由跳转了, 这里的钩子函数就会被调用, 官方的说法叫守卫,我感觉不太好, 如果你理解vue生命周期的钩子函数, 这两个意思其实差不多.</p><p>Vue实例由产生到销毁这个过程有生命周期,而路由跳转也是一个过程, 自然而然也会有生命周期, 同样的对于过度动画, 也有生命周期.</p><p>我第一次接触到生命周期的时候是完全蒙蔽的, 啥玩意啊, 有啥用, 但是当稍微深入了那么点后, 你理解了, 你就会觉得这是件多么自然的事情, 又扯远了(⊙o⊙)…</p><div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'router.beforeEach'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>matched<span class="token punctuation">)</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

router<span class="token punctuation">.</span><span class="token function">beforeResolve</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'router.beforeResolve'</span><span class="token punctuation">)</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'router.afterEach'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><h3 id="router对应关系中的钩子函数"><a href="#router对应关系中的钩子函数" aria-hidden="true" class="header-anchor">#</a> router对应关系中的钩子函数</h3></li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            path<span class="token punctuation">:</span> <span class="token string">'/foo'</span><span class="token punctuation">,</span>
            component<span class="token punctuation">:</span> Foo<span class="token punctuation">,</span>
            beforeEnter<span class="token punctuation">:</span> <span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">// ...</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>官方文档中把叫<strong>路由独享的守卫</strong>, 还是很想吐槽这个名字</p></div><h2 id="钩子的执行过程"><a href="#钩子的执行过程" aria-hidden="true" class="header-anchor">#</a> 钩子的执行过程</h2><p>好了我们说完了所有可能会产生钩子函数的地方, 现在我们来举个栗子, 从栗子中我们可以知道路由跳转的过程中, 这些钩子函数到底是怎么执行的, 首先我们声明三个组件<code>User</code>, <code>David</code>, <code>Yusifeng</code></p><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{name: <span class="token punctuation">'</span>david<span class="token punctuation">'</span>, params: {color: <span class="token punctuation">'</span>pink<span class="token punctuation">'</span>}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> to user/david<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{name: <span class="token punctuation">'</span>yusifeng<span class="token punctuation">'</span>, params: {color: <span class="token punctuation">'</span>blue<span class="token punctuation">'</span>}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> to user/yusifeng<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        age<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> Number<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token keyword">null</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">beforeRouteUpdate</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span> <span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'user -&gt; beforeRouteUpdate'</span><span class="token punctuation">)</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">beforeRouteEnter</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span> <span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'user -&gt; beforeRouteEnter'</span><span class="token punctuation">)</span>

        <span class="token function">next</span><span class="token punctuation">(</span>vm <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'user -&gt;next -&gt; beforeRouteEnter'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// //做一些页面离开后的挽留方法, 不过感觉挺恶心的...</span>
    <span class="token function">beforeRouteLeave</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span> <span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'user -&gt; beforeRouterLeave'</span><span class="token punctuation">)</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div><div class="content edit-link"><!----><!----></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/blog/learn/json-server.html" class="prev">
          json-server
        </a></span><!----></p></div></div></div></div>
    <script src="/blog/assets/js/3.84709ce2.js" defer></script><script src="/blog/assets/js/app.dc7427d7.js" defer></script>
  </body>
</html>
